<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<title>SentiScan - API Keys</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
	<link rel="stylesheet" href="{{ url_for('static', filename='css/apis.css') }}">
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Corinthia:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>

	<div class="dashboard">
		<div class="sidebar">
			<img src="{{ url_for('static', filename='images/SentiScan-logo1.png') }}" alt="Logo" />
			<h2>SentiScan</h2>
			<button onclick="window.location.href='/home'">Dashboard</button>
			<button onclick="window.location.href='/usage'">Check Usage</button>
			<button onclick="window.location.href='/docs'">Documentation</button>
		</div>

		<div class="main">
			<div class="topbar">
				<div onclick="location.reload();" class="fw-bold fs-5">API Key Management</div>
				<div class="user-menu">
					<button onclick="toggleUserDropdown()" id="userBtn">{{ user['name'] }}</button>
					<div id="userDropdown" class="dropdown-content">
						<p><strong>Name:</strong> {{ user['name'] }}</p>
						<p><strong>Email:</strong> {{ user['email'] }}</p>
						<a href="#" onclick="logout()" class="logout-btn">Logout</a>
					</div>
				</div>
			</div>

			<div class="content">
				<h3>Your API Keys:</h3>

				<ul id="keyList">
					{% for key in user.get("api_keys", []) %}
					<li>
						<code>{{ key }}</code>
						<button class="small-btn" onclick="copyKey('{{ key }}', this)">ğŸ“‹ Copy</button>
						<button class="small-btn delete-btn" onclick="deleteKey('{{ key }}', this)">ğŸ—‘ï¸ Delete</button>
						<button class="small-btn view-usage-btn" onclick="window.location.href='/usage?api_key={{ key }}'">ğŸ“Š View Usage</button>
					</li>

					{% endfor %}
				</ul>
				<button class="styled-button" onclick="generateKey()">â• Generate New API Key</button>
				<select id="modelSelector">
				  <option value="r1">Model R1</option>
				  <option value="r2">Model R2</option>
				  <option value="r3">Model R3</option>
				</select>
			</div>
		</div>
	</div>

	<script src="{{ url_for('static', filename='js/apis.js') }}"></script>

</body>
</html>
